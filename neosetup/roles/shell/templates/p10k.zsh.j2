# {{ ansible_managed }}
# Powerlevel10k Configuration - {{ neosetup_operator | default('jiveturkey') }} Operator

# Enable instant prompt (should stay close to the top of ~/.zshrc)
if [[ -r "${XDG_CACHE_HOME:-{{ '$HOME' }}/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-{{ '$HOME' }}/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# Powerlevel10k configuration
typeset -g POWERLEVEL9K_INSTANT_PROMPT=verbose
typeset -g POWERLEVEL9K_MODE='nerdfont-complete'

# Matrix theme colors
{% if operators[neosetup_operator].theme == 'matrix' %}
typeset -g POWERLEVEL9K_COLOR_SCHEME='dark'
typeset -g POWERLEVEL9K_BACKGROUND=black
typeset -g POWERLEVEL9K_FOREGROUND=green
typeset -g POWERLEVEL9K_VISUAL_IDENTIFIER_COLOR=green
{% else %}
typeset -g POWERLEVEL9K_COLOR_SCHEME='dark'
{% endif %}

# Prompt elements
typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
  os_icon
  dir
  vcs
  prompt_char
)

typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(
  status
  command_execution_time
  background_jobs
  direnv
  asdf
  virtualenv
  anaconda
  pyenv
  goenv
  nodenv
  nvm
  nodeenv
  kubecontext
  terraform
  aws
  time
)

# Directory configuration
typeset -g POWERLEVEL9K_SHORTEN_STRATEGY=truncate_to_unique
typeset -g POWERLEVEL9K_SHORTEN_DELIMITER=
typeset -g POWERLEVEL9K_DIR_ANCHOR_BOLD=true

# Git/VCS configuration
typeset -g POWERLEVEL9K_VCS_CLEAN_FOREGROUND=green
typeset -g POWERLEVEL9K_VCS_MODIFIED_FOREGROUND=yellow
typeset -g POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND=cyan

# Time format
typeset -g POWERLEVEL9K_TIME_FORMAT='%D{{ '{%H:%M:%S}' }}'

# Matrix-specific customizations
{% if operators[neosetup_operator].theme == 'matrix' %}
# Green Matrix aesthetic
typeset -g POWERLEVEL9K_PROMPT_CHAR_OK_{{ '{VIINS,VICMD,VIVIS,VIOWR}' }}_FOREGROUND=green
typeset -g POWERLEVEL9K_PROMPT_CHAR_ERROR_{{ '{VIINS,VICMD,VIVIS,VIOWR}' }}_FOREGROUND=red

# Custom Matrix prompt character
typeset -g POWERLEVEL9K_PROMPT_CHAR_{{ '{OK,ERROR}' }}_VIINS_CONTENT_EXPANSION='‚ùØ'
{% endif %}

# Performance optimizations
typeset -g POWERLEVEL9K_DISABLE_GITSTATUS=false
typeset -g POWERLEVEL9K_VCS_MAX_SYNC_LATENCY_SECONDS=0.1
