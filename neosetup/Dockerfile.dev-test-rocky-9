# Test container for rocky-9
FROM rockylinux:9

# Install base packages including python3-venv
RUN if [ -f /etc/debian_version ]; then \
  apt-get update && \
  apt-get install -y python3 python3-pip python3-venv sudo curl wget git openssh-client && \
  apt-get clean; \
elif [ -f /etc/redhat-release ]; then \
  if command -v dnf; then \
    dnf install -y python3 python3-pip sudo curl wget git openssh-clients; \
  fi; \
fi

# Create virtual environment and test installation
RUN python3 -m venv /opt/test-venv
RUN /opt/test-venv/bin/pip install --upgrade pip
RUN /opt/test-venv/bin/pip install ansible PyYAML

WORKDIR /test
