---
# Shell Configuration Playbook
- name: "ğŸš Configure Shell with Matrix Theme"
  hosts: all
  gather_facts: true
  become: false

  vars:
    # Get the current operator or use default
    current_operator: "{{ neosetup_operator | default(default_operator) }}"

  pre_tasks:
    - name: "ğŸ” Display operator selection"
      debug:
        msg: |
          ğŸ­ Selected Operator: {{ current_operator }}
          ğŸš€ Loading operator configurations...

    - name: "ğŸ“¦ Load base operator variables"
      include_vars: "../operators/base/vars.yml"

    - name: "ğŸ“¦ Load matrix operator variables (if applicable)"
      include_vars: "../operators/matrix/vars.yml"
      when: current_operator in ['matrix', 'jiveturkey']

    - name: "ğŸ“¦ Load jiveturkey operator variables (if applicable)"
      include_vars: "../operators/jiveturkey/vars.yml"
      when: current_operator == 'jiveturkey'

    - name: "âœ… Display loaded operator information"
      debug:
        msg: |
          ğŸ­ Operator: {{ current_operator }}
          ğŸ“‹ Description: {{ operators[current_operator].description | default('No description') }}
          ğŸ‘¤ Author: {{ operators[current_operator].author | default('Unknown') }}
          ğŸ¨ Theme: {{ operators[current_operator].theme | default('default') }}
          ğŸ”— Extends: {{ operators[current_operator].extends | default('none') }}

  roles:
    - role: common
      tags: [ 'common' ]

    - role: shell
      tags: [ 'shell' ]
